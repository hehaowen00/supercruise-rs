<!DOCTYPE html>
<html>
  <head>
    <title>Todos</title>
  </head>
  <body>
    <h1>Todos</h1>
    <input id="itemInput" type="text" placeholder="Task"></input>
    <button onclick="post_todo()">Add Todo</button>
    <div id="todos">
      <p><input type="checkbox"></input>Task 1</p>
    </div>
    <script type="text/javascript">
      async function get_todos() {
        console.log("fetching tasks");
        const response = await fetch("/todos", { method: "GET" });
        return await response.json();
      }
      async function post_todo() {
        let el = document.getElementById("itemInput")
        console.log(el.value)
        let resp = await fetch("/todos",
          {
            method: "POST",
            body: JSON.stringify({ "text": el.value, })
          });
        console.log(resp.json());
        el.value = "";
      }
      async function update_todo() {
      }
      get_todos().then(res => console.log(res));
    </script>
  </body>
</html>
